# CubeSat Onboard Flight Software Integration - OBC Challenge Submission

## Project Overview

This project involves the development, integration, and testing of onboard flight software for a CubeSat attitude determination and control system (ADCS) using NASA's Core Flight System (cFS) and the 42 Simulator. The software enables real-time telemetry handling, fault injection, and fault detection demonstration using altitude threshold monitoring.

The onboard software runs within the cFS framework, receiving telemetry data generated by a Python telemetry bridge and controlling actuators based on sensor inputs. The simulation incorporates fault conditions to demonstrate robust system operation and fault response.

---

## System Architecture

- **Core Flight System (cFS):** A reusable, platform-independent flight software framework that hosts the ADCS application.
- **42 Simulator:** Simulates spacecraft dynamics, providing telemetry data like altitude and gyro rates.
- **Telemetry Bridge (Python script):** Generates CCSDS-formatted telemetry packets sent via UDP to the cFS ADCS app.
- **Docker Container:** Encapsulates the entire simulation environment including cFS, telemetry bridge, and build environment.

---

## Integration Details

- The Python telemetry bridge sends CCSDS telemetry packets containing gyro rates, altitude, and timestamps over UDP port 1234.
- The cFS ADCS application listens on UDP port 1234, receives packets, parses CCSDS headers, and extracts sensor data.
- Extracted sensor data feeds into the ADCS control loop replacing simulated sensors.
- Actuator commands are computed in real time based on incoming telemetry.
- The system is validated by live telemetry output displaying altitude drop and status transitions (NORMAL → WARNING → ALTITUDE_FAIL).

---

## Fault Injection and Threshold Demonstration

- Fault injection is simulated by altitude decay in the telemetry bridge causing the altitude to drop gradually.
- Threshold breaches trigger status updates in telemetry output:
  - **NORMAL:** Altitude drop below 80% of threshold.
  - **WARNING:** Altitude drop reaches 80% to threshold.
  - **ALTITUDE_FAIL:** Altitude drop exceeds threshold.
- These fault detections and responses are captured in real-time telemetry output and documented in the demo video.

---

## Build and Run Instructions

### Prerequisites

- Docker installed on host system.
- Access to the provided Docker image or ability to build from source.

### Steps to Run

1. **Start Docker Container:**

docker run -it --cap-add=sys_nice --cap-add=ipc_lock --cap-add=SYS_RESOURCE
--ulimit rtprio=99 --ulimit memlock=-1 --ulimit nice=-20
--sysctl fs.mqueue.msg_max=256 --sysctl fs.mqueue.msgsize_max=65536
--user root --name adcs_sim hk2989441/adcs_sim:test2

2. **Enter Docker Container:**
docker exec -it adcs_sim /bin/bash

3. **In Terminal 1, Run Core Flight System:**
/home/osk/cFS/build/i686-linux-gnu/default_cpu1/cpu1/core-cpu1
> This executes the flight software, running continuously.

4. **In Terminal 2, Run Telemetry Bridge:**
python3 /home/osk/telemetry_bridge.py

> This starts live telemetry output showing altitude, drop, and status.

5. **Observe Telemetry Output:**

- Watch for status changes from NORMAL to WARNING and finally ALTITUDE_FAIL indicating threshold breach.

6. **Manual or Scripted Fault Injection:**

- Faults are induced naturally through altitude decay simulated in telemetry bridge.
- Confirm fault response in telemetry terminal output.

---

## Demo and Recording

- Record your screen showing:
  - Startup of flight software and telemetry.
  - Normal operation (status NORMAL).
  - Fault injection and status transition (WARNING → ALTITUDE_FAIL).
- Save video as `OBC_Demo.mp4` or similar for submission evidence.

---

## Repository Structure

/src/ # Corrected C++ source files for ADCS and microcontroller
/config/ # Configuration and build scripts (Makefile, CMakeLists.txt)
/scripts/ # Telemetry Python bridge and fault injection scripts if any
/Dockerfile # Dockerfile to build the container (if applicable)
/README.md # This file
/demo/ # Saved demo video and logs


---

## Notes and Known Issues

- The cFS executable runs continuously and should be manually stopped after the demo.
- Timing for fault status transitions may vary due to simulation speed and parameters.
- Fault injection is integrated as gradual altitude decay in telemetry bridge; no separate fault injection script was found.
- For additional testing or modifications, update source under `/src/` and rebuild per build instructions.

---

## Contact and Support

For questions or further assistance with this project, reach out to:

- Developer: [Your Name]
- Email: [Your Email]
- Repository: [Link to your GitHub repo]

---

Thank you for reviewing this CubeSat onboard flight software integration project submission.

